###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.1.10123/W32 for ARM       26/Dec/2017  16:48:34
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        F:\iar\NC199B-100\Library\Source\APP\Tasks\app_task_measure.c
#    Command line =  
#        F:\iar\NC199B-100\Library\Source\APP\Tasks\app_task_measure.c -D
#        USE_STDPERIPH_DRIVER -D _STM32F10X_HD -D STM32F10X_CL -D DEBUG -D
#        STM32F103RC -D STM32_FLASH_SIZE=256 -D HSE_VALUE=25000000 -lCN
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\List\
#        -o
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\Obj\
#        --no_unroll --no_inline --no_tbaa --no_scheduling --debug
#        --endian=little --cpu=Cortex-M3 -e --fpu=None --dlib_config
#        "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.3\arm\INC\c\DLib_Config_Full.h" -I
#        F:\iar\NC199B-100\Library\Project\IAR\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\User\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\AES\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\Config\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\OS\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\User\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\Source\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\Port\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\OS\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\Config\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\Protocol\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\Iap\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Driver\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\IAR\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Os\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Os\uCOS-III\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\FWLib\CMSIS\CM3\CoreSupport\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\FWLib\CMSIS\CM3\DeviceSupport\ST\STM32F10x\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\FWLib\STM32F10x_StdPeriph_Driver\inc\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-CPU\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-CPU\ARM-Cortex-M3\IAR\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-LIB\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Os\OSAL\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\OSAL\OS\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\Cfg\Template\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\OS\uCOS-III\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\Source\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-OS-III\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-OS-III\Ports\ARM-Cortex-M3\Generic\IAR\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-OS-III\Source\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\FatFs\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\FatFs\option\ -Om
#        --use_c++_inline -I "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 7.3\arm\CMSIS\Include\"
#    List file    =  
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\List\app_task_measure.lst
#    Object file  =  
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\Obj\app_task_measure.o
#
###############################################################################

F:\iar\NC199B-100\Library\Source\APP\Tasks\app_task_measure.c
      1          /*******************************************************************************
      2           *   Revised:        All copyrights reserved to redmorningcn.
      3           *   Revision:       v1.0
      4           *   Writer:	     redmorningcn.
      5           *
      6           *   Description:    双击选中 store 按 Ctrl + H, 钩选 Match the case, Replace with
      7           *                   输入您要的名字，点击 Replace All
      8           *                   双击选中 Store 按 Ctrl + H, 钩选 Match the case, Replace with
      9           *                   输入您要的名字，点击 Replace All
     10           *                   双击选中 STORE 按 Ctrl + H, 钩选 Match the case, Replace with
     11           *                   输入您要的名字，点击 Replace All
     12           *                   在 app_cfg.h 中指定本任务的 优先级  （ APP_TASK_STORE_PRIO ）
     13           *                                            和 任务堆栈（ APP_TASK_STORE_STK_SIZE ）大小
     14           *                   在 app.h 中声明本任务的     创建函数（ void  App_TaskStoreCreate(void) ）
     15           *                                            和 看门狗标志位 （ WDTFLAG_Store ）
     16           *
     17           *   Notes:
     18           *     				E-mail: redmorningcn@qq.com
     19           *
     20           *******************************************************************************/
     21          
     22          /*******************************************************************************
     23           * INCLUDES
     24           */
     25          #define  SNL_APP_SOURCE
     26          #include <includes.h>
     27          
     28          
     29          //#ifdef VSC_INCLUDE_SOURCE_FILE_NAMES
     30          //const  CPU_CHAR  *app_task_key__c = "$Id: $";
     31          //#endif
     32          
     33          #define APP_TASK_KEY_EN     DEF_ENABLED
     34          #if APP_TASK_KEY_EN == DEF_ENABLED
     35          /*******************************************************************************
     36           * CONSTANTS
     37           */
     38          
     39          /*******************************************************************************
     40           * MACROS
     41           */
     42          //该任务的控制周期   (OS_CFG_TICK_RATE_HZ)为1S
     43          //#define  KEY_CYCLE_TIME_TICKS     (OS_CFG_TICK_RATE_HZ * 1u)
     44          
     45          //进气口电磁阀  pd.3
     46          #define     DCF_GPIO_AIR_IN      303  
     47          //出气口电磁阀 pd.2
     48          #define     DCF_GPIO_AIR_OUT     302   
     49               
     50               
     51          /*******************************************************************************
     52           * TYPEDEFS
     53           */
     54          /***********************************************
     55          * 描述： 任务控制块（TCB）
     56          */

   \                                 In section .bss, align 4
     57          static  OS_TCB   AppTaskMeasureTCB;
   \                     AppTaskMeasureTCB:
   \   00000000                      DS8 184
   \   000000B8                      DS8 512
     58          
     59          /***********************************************
     60          * 描述： 任务堆栈（STACKS）
     61          */
     62          static  CPU_STK  AppTaskMeasureStk[ APP_TASK_MEASURE_STK_SIZE ];
     63          
     64          /*******************************************************************************
     65           * LOCAL VARIABLES
     66           */
     67          
     68          /*******************************************************************************
     69           * GLOBAL VARIABLES
     70           */
     71          /*******************************************************************************
     72           * LOCAL FUNCTIONS
     73           */
     74          static  void    AppTaskMeasure          (void *p_arg);
     75          static  void    APP_MeasureInit         (void);
     76          void            StartAirMeasure         (void);
     77          
     78          //static  void    MeasureValueHandle      (StrCtrlDCB *dcb);
     79          
     80          
     81          /*******************************************************************************
     82           * GLOBAL FUNCTIONS
     83           */
     84          
     85          /*******************************************************************************
     86           * EXTERN VARIABLES
     87           */
     88          extern OS_SEM   App_BeepSem;
     89          
     90          /*******************************************************************************
     91           * EXTERN FUNCTIONS
     92           */
     93          
     94          /*******************************************************************************/
     95          
     96          /*******************************************************************************
     97           * 名    称： App_TaskMeasureCreate
     98           * 功    能： **任务创建
     99           * 入口参数： 无
    100           * 出口参数： 无
    101           * 作　　者： Roger-WY.
    102           * 创建日期： 2015-02-05
    103           * 修    改：
    104           * 修改日期：
    105           * 备    注： 任务创建函数需要在app.h文件中声明
    106           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    107          void  App_TaskMeasureCreate(void)
    108          {
   \                     App_TaskMeasureCreate: (+1)
   \   00000000   0xB500             PUSH     {LR}
   \   00000002   0xB08B             SUB      SP,SP,#+44
    109              OS_ERR  err;
    110          
    111              /***********************************************
    112              * 描述： 任务创建
    113              */
    114              OSTaskCreate((OS_TCB     *)&AppTaskMeasureTCB,                  // 任务控制块  （当前文件中定义）
    115                           (CPU_CHAR   *)"App Task Measure",                  // 任务名称
    116                           (OS_TASK_PTR ) AppTaskMeasure,                     // 任务函数指针（当前文件中定义）
    117                           (void       *) 0,                              // 任务函数参数
    118                           (OS_PRIO     ) APP_TASK_KEY_PRIO,              // 任务优先级，不同任务优先级可以相同，0 < 优先级 < OS_CFG_PRIO_MAX - 2（app_cfg.h中定义）
    119                           (CPU_STK    *)&AppTaskMeasureStk[0],               // 任务栈顶
    120                           (CPU_STK_SIZE) APP_TASK_KEY_STK_SIZE / 10,     // 任务栈溢出报警值
    121                           (CPU_STK_SIZE) APP_TASK_KEY_STK_SIZE,          // 任务栈大小（CPU数据宽度 * 8 * size = 4 * 8 * size(字节)）（app_cfg.h中定义）
    122                           (OS_MSG_QTY  ) 5u,                             // 可以发送给任务的最大消息队列数量
    123                           (OS_TICK     ) 0u,                             // 相同优先级任务的轮循时间（ms），0为默认
    124                           (void       *) 0,                              // 是一个指向它被用作一个TCB扩展用户提供的存储器位置
    125                           (OS_OPT      )(OS_OPT_TASK_STK_CHK |           // 允许堆栈检查该任务
    126                                          OS_OPT_TASK_STK_CLR),           // 创建任务时堆栈清零
    127                           (OS_ERR     *)&err);                           // 指向错误代码的指针，用于创建结果处理
   \   00000004   0x....             LDR.N    R0,??DataTable5
   \   00000006   0xA909             ADD      R1,SP,#+36
   \   00000008   0x9108             STR      R1,[SP, #+32]
   \   0000000A   0x2103             MOVS     R1,#+3
   \   0000000C   0x9107             STR      R1,[SP, #+28]
   \   0000000E   0x2100             MOVS     R1,#+0
   \   00000010   0x9106             STR      R1,[SP, #+24]
   \   00000012   0x9105             STR      R1,[SP, #+20]
   \   00000014   0x2105             MOVS     R1,#+5
   \   00000016   0x9104             STR      R1,[SP, #+16]
   \   00000018   0x2140             MOVS     R1,#+64
   \   0000001A   0x9103             STR      R1,[SP, #+12]
   \   0000001C   0x2106             MOVS     R1,#+6
   \   0000001E   0x9102             STR      R1,[SP, #+8]
   \   00000020   0xF100 0x01B8      ADD      R1,R0,#+184
   \   00000024   0x9101             STR      R1,[SP, #+4]
   \   00000026   0x2117             MOVS     R1,#+23
   \   00000028   0x9100             STR      R1,[SP, #+0]
   \   0000002A   0x2300             MOVS     R3,#+0
   \   0000002C   0x.... 0x....      ADR.W    R2,AppTaskMeasure
   \   00000030   0x.... 0x....      ADR.W    R1,?_0
   \   00000034   0x.... 0x....      BL       OSTaskCreate
    128          
    129          }
   \   00000038   0xB00B             ADD      SP,SP,#+44
   \   0000003A   0xBD00             POP      {PC}             ;; return
    130          

   \                                 In section .bss, align 4
    131          OS_SEM			Bsp_MeasureSem;    	//信号量
   \                     Bsp_MeasureSem:
   \   00000000                      DS8 28
    132          
    133          /*******************************************************************************
    134           * 名    称： AppTaskMeasure
    135           * 功    能： 控制任务
    136           * 入口参数： p_arg - 由任务创建函数传入
    137           * 出口参数： 无
    138           * 作　　者： Roger-WY.
    139           * 创建日期： 2015-02-05
    140           * 修    改：
    141           * 修改日期：
    142           *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    143          static  void  AppTaskMeasure (void *p_arg)
    144          {
   \                     AppTaskMeasure: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
    145          //    OS_ERR      err;
    146              /***********************************************
    147              * 描述： 任务初始化
    148              */
    149              APP_MeasureInit();
   \   00000002   0x.... 0x....      BL       APP_MeasureInit
    150          
    151              BSP_OS_SemCreate(&Bsp_MeasureSem,0, "Bsp MeasureSem");      // 创建信号量
   \   00000006   0x....             LDR.N    R4,??DataTable5_1
   \   00000008   0x.... 0x....      ADR.W    R2,?_1
   \   0000000C   0x2100             MOVS     R1,#+0
   \   0000000E   0x4620             MOV      R0,R4
   \   00000010   0x.... 0x....      BL       BSP_OS_SemCreate
    152          
    153              /***********************************************
    154              * 描述：Task body, always written as an infinite loop.
    155              */
    156                  
    157                  
    158              while (DEF_TRUE) {
    159          
    160                  /***********************************************
    161                  * 描述： 本任务看门狗标志置位
    162                  */
    163          //        OS_FlagPost ((OS_FLAG_GRP *)&WdtFlagGRP,
    164          //                     (OS_FLAGS     ) WDT_FLAG_KEY,
    165          //                     (OS_OPT       ) OS_OPT_POST_FLAG_SET,
    166          //                     (CPU_TS       ) 0,
    167          //                     (OS_ERR      *) &err);
    168                      
    169                  /***********************************************
    170                  * 描述： 等待10min后，测试
    171                  */
    172                      
    173                  BSP_OS_SemWait(&Bsp_MeasureSem,15*60*1000);    // 等待信号量 10min
   \                     ??AppTaskMeasure_0: (+1)
   \   00000014   0x....             LDR.N    R1,??DataTable5_2  ;; 0xdbba0
   \   00000016   0x4620             MOV      R0,R4
   \   00000018   0x.... 0x....      BL       BSP_OS_SemWait
    174                  
    175                  StartAirMeasure();
   \   0000001C   0x.... 0x....      BL       StartAirMeasure
   \   00000020   0xE7F8             B.N      ??AppTaskMeasure_0
    176              }
    177          }
    178          
    179          #define DCF_OPEN    0
    180          #define DCF_CLOSE   1
    181          
    182          /*******************************************************************************
    183           * 作　　者： redmorningcn.
    184           * 创建日期： 2017-11-22
    185           * 修    改：
    186           * 修改日期：
    187           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    188          void        Measure_GPIO_Init(void)
    189          {
   \                     Measure_GPIO_Init: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
    190              //端口初始化为I/O口
    191              GPIO_PinselConfig(DCF_GPIO_AIR_IN,0);
   \   00000002   0xF240 0x142F      MOVW     R4,#+303
   \   00000006   0x2100             MOVS     R1,#+0
   \   00000008   0x4620             MOV      R0,R4
   \   0000000A   0x.... 0x....      BL       GPIO_PinselConfig
    192              GPIO_PinselConfig(DCF_GPIO_AIR_OUT,0);
   \   0000000E   0x2100             MOVS     R1,#+0
   \   00000010   0xF44F 0x7097      MOV      R0,#+302
   \   00000014   0x.... 0x....      BL       GPIO_PinselConfig
    193              
    194              GPIO_SetOrClearValue(DCF_GPIO_AIR_IN, DCF_CLOSE);   //关闭电磁阀
   \   00000018   0x2101             MOVS     R1,#+1
   \   0000001A   0x4620             MOV      R0,R4
   \   0000001C   0x.... 0x....      BL       GPIO_SetOrClearValue
    195              GPIO_SetOrClearValue(DCF_GPIO_AIR_OUT,DCF_CLOSE);   //关闭电磁阀
   \   00000020   0x2101             MOVS     R1,#+1
   \   00000022   0xF44F 0x7097      MOV      R0,#+302
   \   00000026   0x.... 0x....      BL       GPIO_SetOrClearValue
    196              
    197              Ctrl.Para.dat.sRunPara.SysSta.OpenAir = 0;  //气路打开标识置1
    198              Ctrl.Para.dat.sRunPara.SysSta.CloseAir= 1;         
   \   0000002A   0x....             LDR.N    R0,??DataTable5_3
   \   0000002C   0xF890 0x104C      LDRB     R1,[R0, #+76]
   \   00000030   0xF001 0x01FE      AND      R1,R1,#0xFE
   \   00000034   0xF041 0x0102      ORR      R1,R1,#0x2
   \   00000038   0xF880 0x104C      STRB     R1,[R0, #+76]
    199          }
   \   0000003C   0xBD10             POP      {R4,PC}          ;; return
    200          
    201          /*******************************************************************************
    202           * 作　　者： redmorningcn.
    203           * 创建日期： 2017-11-23
    204           * 修    改： 打开 电磁阀，先打开输出，再打开输入。然后置测量标识
    205                        关闭 电磁阀，先关输入，在关输出。然后置测试标识
    206           * 修改日期：
    207           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    208          void    CloseAir(void)
    209          {
   \                     CloseAir: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    210              OS_ERR  err;
    211          
    212              ////////关闭测试
    213              GPIO_SetOrClearValue(DCF_GPIO_AIR_IN,DCF_CLOSE);    //先关输入
   \   00000002   0x2101             MOVS     R1,#+1
   \   00000004   0xF240 0x102F      MOVW     R0,#+303
   \   00000008   0x.... 0x....      BL       GPIO_SetOrClearValue
    214              //OSTimeDly(1000, OS_OPT_TIME_DLY, &err);           //延时0.1s
    215              BSP_OS_TimeDly(1000);
   \   0000000C   0xF44F 0x707A      MOV      R0,#+1000
   \   00000010   0x.... 0x....      BL       BSP_OS_TimeDly
    216          
    217              
    218              GPIO_SetOrClearValue(DCF_GPIO_AIR_OUT,DCF_CLOSE);   //再关输出
   \   00000014   0x2101             MOVS     R1,#+1
   \   00000016   0xF44F 0x7097      MOV      R0,#+302
   \   0000001A   0x.... 0x....      BL       GPIO_SetOrClearValue
    219              //OSTimeDly(1000, OS_OPT_TIME_DLY, &err);           //延时0.5s    
    220              BSP_OS_TimeDly(1000);
   \   0000001E   0xF44F 0x707A      MOV      R0,#+1000
   \   00000022   0xE8BD 0x4002      POP      {R1,LR}
   \   00000026   0x.... 0x....      B.W      BSP_OS_TimeDly
    221          
    222          }
    223          
    224          /*******************************************************************************
    225           * 作　　者： redmorningcn.
    226           * 创建日期： 2017-11-22
    227           * 修    改： 打开 电磁阀，先打开输出，再打开输入。然后置测量标识
    228                        关闭 电磁阀，先关输入，在关输出。然后置测试标识
    229           * 修改日期：
    230           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    231          void    StartAirMeasure(void)
    232          {
   \                     StartAirMeasure: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
    233              OS_ERR  err;
    234          
    235              ////////启动测试
    236              GPIO_SetOrClearValue(DCF_GPIO_AIR_OUT,DCF_OPEN);   //打开输出
   \   00000002   0x2100             MOVS     R1,#+0
   \   00000004   0xF44F 0x7097      MOV      R0,#+302
   \   00000008   0x.... 0x....      BL       GPIO_SetOrClearValue
    237              //OSTimeDly(1000, OS_OPT_TIME_DLY, &err);          //延时0.5s
    238              BSP_OS_TimeDly(500);
   \   0000000C   0xF44F 0x70FA      MOV      R0,#+500
   \   00000010   0x.... 0x....      BL       BSP_OS_TimeDly
    239              
    240              GPIO_SetOrClearValue(DCF_GPIO_AIR_IN,DCF_OPEN);    //打开输出
   \   00000014   0x2100             MOVS     R1,#+0
   \   00000016   0xF240 0x102F      MOVW     R0,#+303
   \   0000001A   0x.... 0x....      BL       GPIO_SetOrClearValue
    241              //OSTimeDly(1000, OS_OPT_TIME_DLY, &err);      //延时0.1s
    242          
    243              Ctrl.Para.dat.sRunPara.SysSta.OpenAir = 1;  //气路打开标识置1
    244              Ctrl.Para.dat.sRunPara.SysSta.CloseAir= 0; 
   \   0000001E   0x....             LDR.N    R4,??DataTable5_4
   \   00000020   0x7820             LDRB     R0,[R4, #+0]
   \   00000022   0xF000 0x00FD      AND      R0,R0,#0xFD
   \   00000026   0xF040 0x0001      ORR      R0,R0,#0x1
   \   0000002A   0x7020             STRB     R0,[R4, #+0]
    245              
    246              //OSTimeDly(12000, OS_OPT_TIME_DLY, &err);    //延时12s
    247              //BSP_OS_TimeDly(12000);
    248              if(     Ctrl.Para.dat.sRunPara.MeasureSecond >30 
    249                 ||   Ctrl.Para.dat.sRunPara.MeasureSecond < 1)
   \   0000002C   0x7920             LDRB     R0,[R4, #+4]
   \   0000002E   0x281F             CMP      R0,#+31
   \   00000030   0xDA01             BGE.N    ??StartAirMeasure_0
   \   00000032   0x2800             CMP      R0,#+0
   \   00000034   0xD101             BNE.N    ??StartAirMeasure_1
    250              {
    251                  Ctrl.Para.dat.sRunPara.MeasureSecond = 3;
   \                     ??StartAirMeasure_0: (+1)
   \   00000036   0x2003             MOVS     R0,#+3
   \   00000038   0x7120             STRB     R0,[R4, #+4]
    252              }
    253              
    254              BSP_OS_TimeDly(Ctrl.Para.dat.sRunPara.MeasureSecond*1000);
   \                     ??StartAirMeasure_1: (+1)
   \   0000003A   0x7920             LDRB     R0,[R4, #+4]
   \   0000003C   0xF44F 0x717A      MOV      R1,#+1000
   \   00000040   0x4348             MULS     R0,R1,R0
   \   00000042   0x.... 0x....      BL       BSP_OS_TimeDly
    255          
    256              Ctrl.Para.dat.sRunPara.SysSta.StartMeasure = 1;
   \   00000046   0x7820             LDRB     R0,[R4, #+0]
   \   00000048   0xF040 0x0004      ORR      R0,R0,#0x4
   \   0000004C   0x7020             STRB     R0,[R4, #+0]
    257              
    258              //OSTimeDly(2000, OS_OPT_TIME_DLY, &err);     //延时2s  
    259              //BSP_OS_TimeDly(2000);
    260          
    261              //初始化定时器
    262              osal_start_timerEx( OS_TASK_ID_STORE,
    263                                OS_EVT_STORE_TICKS,
    264                                1);                       //置存储定时器1，马上启动存储
   \   0000004E   0x2201             MOVS     R2,#+1
   \   00000050   0x4611             MOV      R1,R2
   \   00000052   0x2004             MOVS     R0,#+4
   \   00000054   0x.... 0x....      BL       osal_start_timerEx
    265              Ctrl.Para.dat.sRunPara.SysSta.Store   = 1;  //可以进行数据储存（测量过程的数据）
   \   00000058   0x7820             LDRB     R0,[R4, #+0]
   \   0000005A   0xF040 0x0010      ORR      R0,R0,#0x10
   \   0000005E   0x7020             STRB     R0,[R4, #+0]
    266              
    267              //OSTimeDly(2000, OS_OPT_TIME_DLY, &err);     //延时2s   
    268              //BSP_OS_TimeDly(2000);
    269          
    270              CloseAir();                                 //关闭气路
   \   00000060   0x.... 0x....      BL       CloseAir
    271                
    272              Ctrl.Para.dat.sRunPara.SysSta.OpenAir = 0;  //气路打开标识置1
    273              Ctrl.Para.dat.sRunPara.SysSta.CloseAir= 1;     
    274              
    275              Ctrl.Para.dat.sRunPara.SysSta.StartMeasure = 0;
   \   00000064   0x7820             LDRB     R0,[R4, #+0]
   \   00000066   0xF000 0x00FA      AND      R0,R0,#0xFA
   \   0000006A   0xF040 0x0002      ORR      R0,R0,#0x2
   \   0000006E   0x7020             STRB     R0,[R4, #+0]
    276          }
   \   00000070   0xBD10             POP      {R4,PC}          ;; return
    277          
    278          
    279          /*******************************************************************************
    280           * 名    称： APP_MeasureInit
    281           * 功    能： 任务初始化
    282           * 入口参数： 无
    283           * 出口参数： 无
    284           * 作　　者： Roger-WY.
    285           * 创建日期： 2015-03-28
    286           * 修    改：
    287           * 修改日期：
    288           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    289          static void APP_MeasureInit(void)
    290          {
    291              /***********************************************
    292              * 描述： 初始化本任务用到的相关硬件
    293              */
    294              Measure_GPIO_Init();            //初始化端口
   \                     APP_MeasureInit: (+1)
   \   00000000   0x....             B.N      Measure_GPIO_Init
    295          
    296              /***********************************************
    297              * 描述： 在看门狗标志组注册本任务的看门狗标志
    298              */
    299              //WdtFlags |= WDT_FLAG_KEY;
    300          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5:
   \   00000000   0x........         DC32     AppTaskMeasureTCB

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_1:
   \   00000000   0x........         DC32     Bsp_MeasureSem

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_2:
   \   00000000   0x000DBBA0         DC32     0xdbba0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_3:
   \   00000000   0x........         DC32     Ctrl

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable5_4:
   \   00000000   0x........         DC32     Ctrl+0x4C

   \                                 In section .text, align 4, keep-with-next
   \                     ?_0:
   \   00000000   0x41 0x70          DC8 "App Task Measure"
   \              0x70 0x20    
   \              0x54 0x61    
   \              0x73 0x6B    
   \              0x20 0x4D    
   \              0x65 0x61    
   \              0x73 0x75    
   \              0x72 0x65    
   \              0x00         
   \   00000011   0x00 0x00          DC8 0, 0, 0
   \              0x00         

   \                                 In section .text, align 4, keep-with-next
   \                     ?_1:
   \   00000000   0x42 0x73          DC8 "Bsp MeasureSem"
   \              0x70 0x20    
   \              0x4D 0x65    
   \              0x61 0x73    
   \              0x75 0x72    
   \              0x65 0x53    
   \              0x65 0x6D    
   \              0x00         
   \   0000000F   0x00               DC8 0
    301          
    302          /*******************************************************************************
    303           * 				end of file
    304           *******************************************************************************/
    305          #endif

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   APP_MeasureInit
         0   -> Measure_GPIO_Init
       8   AppTaskMeasure
         8   -> APP_MeasureInit
         8   -> BSP_OS_SemCreate
         8   -> BSP_OS_SemWait
         8   -> StartAirMeasure
      48   App_TaskMeasureCreate
        48   -> OSTaskCreate
       8   CloseAir
         0   -> BSP_OS_TimeDly
         8   -> BSP_OS_TimeDly
         8   -> GPIO_SetOrClearValue
       8   Measure_GPIO_Init
         8   -> GPIO_PinselConfig
         8   -> GPIO_SetOrClearValue
       8   StartAirMeasure
         8   -> BSP_OS_TimeDly
         8   -> CloseAir
         8   -> GPIO_SetOrClearValue
         8   -> osal_start_timerEx


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable5
       4  ??DataTable5_1
       4  ??DataTable5_2
       4  ??DataTable5_3
       4  ??DataTable5_4
      20  ?_0
      16  ?_1
       2  APP_MeasureInit
      34  AppTaskMeasure
     696  AppTaskMeasureTCB
          AppTaskMeasureStk
      60  App_TaskMeasureCreate
      28  Bsp_MeasureSem
      42  CloseAir
      62  Measure_GPIO_Init
     114  StartAirMeasure

 
 724 bytes in section .bss
 370 bytes in section .text
 
 370 bytes of CODE memory
 724 bytes of DATA memory

Errors: none
Warnings: 2
