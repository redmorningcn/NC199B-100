###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.1.10123/W32 for ARM       20/Nov/2017  11:24:17
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  F:\iar\NC199B-100\Library\Source\APP\AES\aes_ofb.c
#    Command line =  
#        F:\iar\NC199B-100\Library\Source\APP\AES\aes_ofb.c -D
#        USE_STDPERIPH_DRIVER -D _STM32F10X_HD -D STM32F10X_CL -D DEBUG -D
#        STM32F103RC -D STM32_FLASH_SIZE=256 -D HSE_VALUE=25000000 -lCN
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\List\
#        -o
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\Obj\
#        --no_unroll --no_inline --no_tbaa --no_scheduling --debug
#        --endian=little --cpu=Cortex-M3 -e --fpu=None --dlib_config
#        "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.3\arm\INC\c\DLib_Config_Full.h" -I
#        F:\iar\NC199B-100\Library\Project\IAR\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\User\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\AES\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\Config\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\OS\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\User\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\Source\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\Port\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\OS\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\SIM900A\Config\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\Protocol\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\APP\Iap\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Driver\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\IAR\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Os\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Os\uCOS-III\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\FWLib\CMSIS\CM3\CoreSupport\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\FWLib\CMSIS\CM3\DeviceSupport\ST\STM32F10x\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\St\FWLib\STM32F10x_StdPeriph_Driver\inc\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-CPU\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-CPU\ARM-Cortex-M3\IAR\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-LIB\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\BSP\Os\OSAL\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\OSAL\OS\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\Cfg\Template\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\OS\uCOS-III\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-MB\Source\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-OS-III\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-OS-III\Ports\ARM-Cortex-M3\Generic\IAR\
#        -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\Micrium\uC-OS-III\Source\
#        -I F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\FatFs\ -I
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\Source\FatFs\option\ -Om
#        --use_c++_inline -I "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 7.3\arm\CMSIS\Include\"
#    List file    =  
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\List\aes_ofb.lst
#    Object file  =  
#        F:\iar\NC199B-100\Library\Project\IAR\..\..\..\Output\Lib\Debug-RC\Obj\aes_ofb.o
#
###############################################################################

F:\iar\NC199B-100\Library\Source\APP\AES\aes_ofb.c
      1          /** crypto/aes/aes_ofb.c -*- mode:C; c-file-style: "eay" -*- */
      2          /** ====================================================================
      3           * Copyright (c) 1998-2002 The OpenSSL Project.  All rights reserved.
      4           *
      5           * Redistribution and use in source and binary forms, with or without
      6           * modification, are permitted provided that the following conditions
      7           * are met:
      8           *
      9           * 1. Redistributions of source code must retain the above copyright
     10           *    notice, this list of conditions and the following disclaimer. 
     11           *
     12           * 2. Redistributions in binary form must reproduce the above copyright
     13           *    notice, this list of conditions and the following disclaimer in
     14           *    the documentation and/or other materials provided with the
     15           *    distribution.
     16           *
     17           * 3. All advertising materials mentioning features or use of this
     18           *    software must display the following acknowledgment:
     19           *    "This product includes software developed by the OpenSSL Project
     20           *    for use in the OpenSSL Toolkit. (http://www.openssl.org/)"
     21           *
     22           * 4. The names "OpenSSL Toolkit" and "OpenSSL Project" must not be used to
     23           *    endorse or promote products derived from this software without
     24           *    prior written permission. For written permission, please contact
     25           *    openssl-core@openssl.org.
     26           *
     27           * 5. Products derived from this software may not be called "OpenSSL"
     28           *    nor may "OpenSSL" appear in their names without prior written
     29           *    permission of the OpenSSL Project.
     30           *
     31           * 6. Redistributions of any form whatsoever must retain the following
     32           *    acknowledgment:
     33           *    "This product includes software developed by the OpenSSL Project
     34           *    for use in the OpenSSL Toolkit (http://www.openssl.org/)"
     35           *
     36           * THIS SOFTWARE IS PROVIDED BY THE OpenSSL PROJECT ``AS IS'' AND ANY
     37           * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     38           * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
     39           * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE OpenSSL PROJECT OR
     40           * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
     41           * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
     42           * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
     43           * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
     44           * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
     45           * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
     46           * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
     47           * OF THE POSSIBILITY OF SUCH DAMAGE.
     48           * ====================================================================
     49           *
     50           */
     51          /** Copyright (C) 1995-1998 Eric Young (eay@cryptsoft.com)
     52           * All rights reserved.
     53           *
     54           * This package is an SSL implementation written
     55           * by Eric Young (eay@cryptsoft.com).
     56           * The implementation was written so as to conform with Netscapes SSL.
     57           * 
     58           * This library is free for commercial and non-commercial use as long as
     59           * the following conditions are aheared to.  The following conditions
     60           * apply to all code found in this distribution, be it the RC4, RSA,
     61           * lhash, DES, etc., code; not just the SSL code.  The SSL documentation
     62           * included with this distribution is covered by the same copyright terms
     63           * except that the holder is Tim Hudson (tjh@cryptsoft.com).
     64           * 
     65           * Copyright remains Eric Young's, and as such any Copyright notices in
     66           * the code are not to be removed.
     67           * If this package is used in a product, Eric Young should be given attribution
     68           * as the author of the parts of the library used.
     69           * This can be in the form of a textual message at program startup or
     70           * in documentation (online or textual) provided with the package.
     71           * 
     72           * Redistribution and use in source and binary forms, with or without
     73           * modification, are permitted provided that the following conditions
     74           * are met:
     75           * 1. Redistributions of source code must retain the copyright
     76           *    notice, this list of conditions and the following disclaimer.
     77           * 2. Redistributions in binary form must reproduce the above copyright
     78           *    notice, this list of conditions and the following disclaimer in the
     79           *    documentation and/or other materials provided with the distribution.
     80           * 3. All advertising materials mentioning features or use of this software
     81           *    must display the following acknowledgement:
     82           *    "This product includes cryptographic software written by
     83           *     Eric Young (eay@cryptsoft.com)"
     84           *    The word 'cryptographic' can be left out if the rouines from the library
     85           *    being used are not cryptographic related :-).
     86           * 4. If you include any Windows specific code (or a derivative thereof) from 
     87           *    the apps directory (application code) you must include an acknowledgement:
     88           *    "This product includes software written by Tim Hudson (tjh@cryptsoft.com)"
     89           * 
     90           * THIS SOFTWARE IS PROVIDED BY ERIC YOUNG ``AS IS'' AND
     91           * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     92           * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
     93           * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
     94           * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     95           * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
     96           * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
     97           * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
     98           * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
     99           * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
    100           * SUCH DAMAGE.
    101           * 
    102           * The licence and distribution terms for any publically available version or
    103           * derivative of this code cannot be changed.  i.e. this code cannot simply be
    104           * copied and put under another distribution licence
    105           * [including the GNU Public Licence.]
    106           */
    107          
    108          #ifndef AES_DEBUG
    109          # ifndef NDEBUG
    110          #  define NDEBUG
    111          # endif
    112          #endif
    113          #include <assert.h>
    114          
    115          #include <aes.h>
    116          #include "aes_locl.h"
    117          
    118          /** The input and output encrypted as though 128bit ofb mode is being
    119           * used.  The extra state information to record how much of the
    120           * 128bit block we have used is contained in *num;
    121           */

   \                                 In section .text, align 2, keep-with-next
    122          void AES_ofb128_encrypt(const unsigned char *in, unsigned char *out,
    123          	const unsigned long length, const AES_KEY *key,
    124          	unsigned char *ivec, int *num) {
   \                     AES_ofb128_encrypt: (+1)
   \   00000000   0xE92D 0x47F0      PUSH     {R4-R10,LR}
   \   00000004   0x4604             MOV      R4,R0
   \   00000006   0x460D             MOV      R5,R1
   \   00000008   0x4692             MOV      R10,R2
   \   0000000A   0x461E             MOV      R6,R3
    125          
    126          	unsigned int n;
    127          	unsigned long l=length;
   \   0000000C   0x9F09             LDR      R7,[SP, #+36]
    128          
    129          	assert(in && out && key && ivec && num);
    130          
    131          	n = *num;
   \   0000000E   0xF8D7 0x8000      LDR      R8,[R7, #+0]
   \   00000012   0xF8DD 0x9020      LDR      R9,[SP, #+32]
   \   00000016   0xE012             B.N      ??AES_ofb128_encrypt_0
    132          
    133          	while (l--) {
    134          		if (n == 0) {
   \                     ??AES_ofb128_encrypt_1: (+1)
   \   00000018   0xF1B8 0x0F00      CMP      R8,#+0
   \   0000001C   0xD104             BNE.N    ??AES_ofb128_encrypt_2
    135          			AES_encrypt(ivec, ivec, key);
   \   0000001E   0x4632             MOV      R2,R6
   \   00000020   0x4649             MOV      R1,R9
   \   00000022   0x4648             MOV      R0,R9
   \   00000024   0x.... 0x....      BL       AES_encrypt
    136          		}
    137          		*(out++) = *(in++) ^ ivec[n];
   \                     ??AES_ofb128_encrypt_2: (+1)
   \   00000028   0xF814 0x0B01      LDRB     R0,[R4], #+1
   \   0000002C   0xF818 0x1009      LDRB     R1,[R8, R9]
   \   00000030   0x4048             EORS     R0,R1,R0
   \   00000032   0xF805 0x0B01      STRB     R0,[R5], #+1
    138          		n = (n+1) % AES_BLOCK_SIZE;
   \   00000036   0xF108 0x0001      ADD      R0,R8,#+1
   \   0000003A   0xF000 0x080F      AND      R8,R0,#0xF
    139          	}
   \                     ??AES_ofb128_encrypt_0: (+1)
   \   0000003E   0x4650             MOV      R0,R10
   \   00000040   0xF1A0 0x0A01      SUB      R10,R0,#+1
   \   00000044   0x2800             CMP      R0,#+0
   \   00000046   0xD1E7             BNE.N    ??AES_ofb128_encrypt_1
    140          
    141          	*num=n;
   \   00000048   0xF8C7 0x8000      STR      R8,[R7, #+0]
    142          }
   \   0000004C   0xE8BD 0x87F0      POP      {R4-R10,PC}      ;; return
    143          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      32   AES_ofb128_encrypt
        32   -> AES_encrypt


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      80  AES_ofb128_encrypt

 
 80 bytes in section .text
 
 80 bytes of CODE memory

Errors: none
Warnings: none
